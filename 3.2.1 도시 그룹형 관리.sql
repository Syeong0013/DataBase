--공통코드 테이블 ( 주업무X 코드성업무O )


SELECT * FROM CODES
WHERE GROUPID='CIDO'
;
/*
C001	시도코드		0		CIDO
C002	부산	C001	1		CIDO
C005	금정구	C002	2		CIDO
C006	동래구	C002	2		CIDO
C007	해운대구	C002	2		CIDO
C008	구서동	C005	3		CIDO
C009	남산동	C005	3		CIDO
C010	칠산동	C006	3		CIDO
C011	연산동	C006	3		CIDO
C012	사직동	C006	3		CIDO
C013	우동	C007	3		CIDO
C014	좌동	C007	3		CIDO
C003	경남	C001	1		CIDO
C015	김해	C003	2		CIDO
C016	창원	C003	2		CIDO
C017	외동	C016	3		CIDO
C018	내동	C016	3		CIDO
C019	창원구	C016	3		CIDO
C020	마산구	C016	3		CIDO
C021	사파정동	C019	4		CIDO
C022	성산동	C019	4		CIDO
C023	의창동	C019	4		CIDO
C024	합포동	C020	4		CIDO
C025	양덕동	C020	4		CIDO
C026	의성동	C020	4		CIDO
C004	울산	C001	1		CIDO
C027	동구	C004	2		CIDO
C028	남구	C004	2		CIDO
C029	방어동	C027	3		CIDO
C030	전하동	C027	3		CIDO
*/

SELECT * FROM CODES
WHERE GROUPID='CIDO'
AND PARENTID ='C001'
;
/*
C002	부산	C001	1		CIDO
C003	경남	C001	1		CIDO
C004	울산	C001	1		CIDO
*/

SELECT * FROM CODES
WHERE GROUPID='CIDO'
AND PARENTID ='C001'
ORDER BY CODESEQ ASC
;
/*
C002	부산	C001	1	1	CIDO
C004	울산	C001	1	2	CIDO
C003	경남	C001	1	3	CIDO
*/

SELECT LPAD(' ', CODELVL * 2)||CODENAME, CODESEQ FROM CODES
WHERE GROUPID='CIDO'				--CIDO만 출력
START WITH PARENTID IS NULL			
CONNECT BY PRIOR CODEID = PARENTID
ORDER SIBLINGS BY CODESEQ			--단락별로 정리시켜주는 코드 
;


-- '제 3정규화'로 그룹아이디별로 관리하기 위한 테이블 생성
 CREATE TABLE GROUPS
 (
	GROUPID		CHAR(4)			PRIMARY KEY,
	GROUPNAME	VARCHAR(2)		NOT NULL,
	GROUPTEXT	VARCHAR(2)		NULL
 );
 
 
 INSERT INTO GROUPS VALUES ('CIDO', '주소관리', '시도, 구군 주소');
 INSERT INTO GROUPS VALUES ('MENU', '메뉴관리', NULL);
 INSERT INTO GROUPS VALUES ('PART', '조직관리', NULL);
 
 
 SELECT * FROM GROUPS;
 /*
 CIDO	주소관리	시도, 구군 주소
 MENU	메뉴관리	
 PART	조직관리	
 */
 
 -- 주소 보기
 SELECT LPAD(' ', CODELVL * 2)||CODENAME, CODESEQ
 FROM GROUPS T1, CODES T2
 WHERE T1.GROUPID = T2.GROUPID
 AND T1.GROUPID = 'CIDO'
 START WITH T2.PARENTID IS NULL
 CONNECT BY PRIOR T2.CODEID = T2.PARENTID
 ORDER SIBLINGS BY T2.CODESEQ
 ;
 
 
 
 
 
 
 
